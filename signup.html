<!DOCTYPE html>
<html>
<head>
    <title>Signup</title>
    <link rel="stylesheet" href="style.css">
</head>

<body style="display:flex;justify-content:center;align-items:center;height:100vh;">

    <div style="background:#1a1a1a;padding:40px;border-radius:15px;width:320px;text-align:center">
        <h2>Create Account</h2>

        <input id="username" placeholder="Username"
               style="width:100%;padding:10px;margin:10px 0;border-radius:8px;">
        <input id="email" type="email" placeholder="Email"
               style="width:100%;padding:10px;margin:10px 0;border-radius:8px;">
        <input id="password" type="password" placeholder="Password"
               style="width:100%;padding:10px;margin:10px 0;border-radius:8px;">

        <button onclick="signup()" style="width:100%;padding:10px;border-radius:8px;">
            Sign up
        </button>

        <p style="margin-top:10px;font-size:14px;">
            Already have an account? <a href="login.html">Login</a>
        </p>
    </div>

    <script>
        async function signup() {
            const username = document.getElementById("username").value;
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            const res = await fetch("http://localhost:5000/api/signup", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ username, email, password })
            });

            const data = await res.json();

            if (!res.ok) {
                alert(data.message || "Signup failed");
                return;
            }

            localStorage.setItem("token", data.token);
            localStorage.setItem("username", data.user.username);

            window.location.href = "index.html";
        }
    </script>
</body>
</html>
